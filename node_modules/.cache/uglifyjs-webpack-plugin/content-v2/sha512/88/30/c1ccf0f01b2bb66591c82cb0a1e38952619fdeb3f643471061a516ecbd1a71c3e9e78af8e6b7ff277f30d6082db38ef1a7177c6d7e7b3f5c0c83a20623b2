{"code":"!function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t){(()=>{const e=document.getElementById(\"todo-list\"),t=document.querySelector('#add-task input[type=\"text\"]'),n=[];let o;function s(e){e=e.toLowerCase(),localStorage.setItem(\"colorTheme\",e),[document.querySelector(\"body\"),document.querySelector(\"header\"),document.querySelector(\"aside\"),document.querySelectorAll(\"#content h2\")].forEach(t=>{t.length>0?t.forEach(t=>{t.classList.length?t.className=t.className.replace(/^theme-.*/g,\"theme-\"+e):t.classList.add(\"theme-\"+e)}):t.classList.length?t.className=t.className.replace(/^theme-.*/g,\"theme-\"+e):t.classList.add(\"theme-\"+e)})}function r(e){let n={body:e},s=o.transaction([\"notes\"],\"readwrite\");s.objectStore(\"notes\").add(n);s.oncomplete=(()=>{a(),t.value=\"\"}),s.onerror=(()=>{alert(\"There was a problem saving this task\")})}function a(){for(;e.firstChild;)e.removeChild(e.firstChild);o.transaction(\"notes\").objectStore(\"notes\").openCursor().onsuccess=(t=>{let n=t.target.result;if(n){let t=document.createElement(\"li\");t.setAttribute(\"data-note-id\",n.value.id),t.innerHTML=`<span class='task-content'>${n.value.body}</span>\\n          <span class='options'>\\n            <span class='editBtn'><i class='fas fa-pencil-alt'></i></span>\\n            <span class='deleteBtn'><i class='fas fa-trash'></i></span>\\n            <span class='optionsBtn'><i class='fas fa-ellipsis-v'></i></span>\\n          </span>`,e.appendChild(t),l(t),document.querySelectorAll(\"#content h2\").forEach(e=>{e.style.display=\"block\"}),n.continue()}else e.firstChild||(document.querySelectorAll(\"#content h2\").forEach(e=>{e.style.display=\"none\"}),console.warn(\"No notes found\"));!function(){let e=o.transaction([\"notes\"],\"readwrite\").objectStore(\"notes\").count();e.onsuccess=(()=>{const t=e.result;document.getElementById(\"task-count\").innerText=1===t?\"1 task\":t+\" tasks\"})}()})}function l(e){const t=e.querySelector(\".options\");e.addEventListener(\"click\",o=>{o.stopPropagation(),e.classList.contains(\"edit-mode\")||t.contains(o.target)||function(e){e.classList.add(\"removed\"),window.setTimeout(()=>{n.push(e.querySelector(\".task-content\").innerText),c(Number(e.getAttribute(\"data-note-id\"))),document.getElementById(\"undoBtn\").style.display=0==n.length?\"none\":\"block\"},1800)}(e)}),t.addEventListener(\"click\",t=>{if(t.target.matches(\".optionsBtn\")||t.target.parentElement.matches(\".optionsBtn\"))e.classList.contains(\"options-open\")?e.classList.remove(\"options-open\"):e.classList.add(\"options-open\");else if(t.target.matches(\".deleteBtn\")||t.target.parentElement.matches(\".deleteBtn\"))n.push(e.querySelector(\".task-content\").innerText),c(Number(e.getAttribute(\"data-note-id\"))),document.getElementById(\"undoBtn\").style.display=0==n.length?\"none\":\"block\";else if(t.target.matches(\".editBtn\")||t.target.parentElement.matches(\".editBtn\"))if(e.classList.contains(\"edit-mode\"))e.classList.remove(\"edit-mode\"),e.querySelector(\".task-content\").blur(),e.querySelector(\".task-content\").setAttribute(\"contenteditable\",!1),e.querySelector(\".editBtn i\").classList.replace(\"fa-save\",\"fa-pencil-alt\");else{e.classList.add(\"edit-mode\"),e.querySelector(\".task-content\").setAttribute(\"contenteditable\",!0),e.querySelector(\".editBtn i\").classList.replace(\"fa-pencil-alt\",\"fa-save\"),e.querySelector(\".task-content\").focus();let t=e.querySelector(\".task-content\").firstChild,n=t.length,o=document.createRange();o.setStart(t,n),o.setEnd(t,n);let s=window.getSelection();s.removeAllRanges(),s.addRange(o)}}),e.querySelector(\".task-content\").addEventListener(\"keydown\",t=>{13===t.keyCode&&(t.preventDefault(),e.classList.remove(\"edit-mode\"),e.querySelector(\".task-content\").blur(),e.querySelector(\".task-content\").setAttribute(\"contenteditable\",!1),e.querySelector(\".editBtn i\").classList.replace(\"fa-save\",\"fa-pencil-alt\"),e.querySelector(\".optionsBtn\").click())}),e.querySelector(\".task-content\").addEventListener(\"keyup\",t=>{let n=t.target.innerText,s=e.getAttribute(\"data-note-id\");o.transaction([\"notes\"],\"readwrite\").objectStore(\"notes\").openCursor().onsuccess=(e=>{const t=e.target.result;if(t){if(t.key==s){const e=t.value;e.body=n,t.update(e).onsuccess=function(){}}t.continue()}})})}function c(e){let t=o.transaction([\"notes\"],\"readwrite\");t.objectStore(\"notes\").delete(e);t.oncomplete=(()=>{a()})}!function(){localStorage.getItem(\"colorTheme\")&&s(localStorage.getItem(\"colorTheme\"));localStorage.getItem(\"listTitle\")&&(document.getElementById(\"list-title\").innerText=localStorage.getItem(\"listTitle\"))}(),\"serviceWorker\"in navigator&&navigator.serviceWorker.register(\"sw.js\"),document.getElementById(\"list-title\").addEventListener(\"keyup\",e=>{const t=document.getElementById(\"list-title\").innerText.charAt(0).toUpperCase()+document.getElementById(\"list-title\").innerText.substr(1);localStorage.setItem(\"listTitle\",t)}),document.querySelectorAll(\"#todo-list li\").forEach(e=>{l(e)}),document.getElementById(\"add-task\").addEventListener(\"submit\",e=>{e.preventDefault();const n=t.value.charAt(0).toUpperCase()+t.value.substr(1);n.trim().length>0&&r(n)}),document.getElementById(\"menuBtn\").addEventListener(\"click\",e=>{e.target.classList.contains(\"open\")?(document.querySelector(\"main\").style.right=\"0px\",document.querySelector(\"aside\").style.marginRight=\"-250px\",e.target.classList.remove(\"open\")):(document.querySelector(\"main\").style.right=\"250px\",document.querySelector(\"aside\").style.margin=\"0px\",e.target.classList.add(\"open\"))}),document.querySelectorAll(\"#colors div\").forEach(e=>{e.addEventListener(\"click\",e=>{s(e.target.getAttribute(\"data-color\"))})}),document.getElementById(\"undoBtn\").addEventListener(\"click\",e=>{!function(){if(n.length>0){const e=n.pop();r(e),document.getElementById(\"undoBtn\").style.display=0==n.length?\"none\":\"block\"}}()}),window.onload=(()=>{let e=window.indexedDB.open(\"notes\",1);e.onerror=(()=>{console.error(\"Database failed to open\")}),e.onsuccess=(()=>{console.log(\"Database loaded successfully\"),o=e.result,a()}),e.onupgradeneeded=(e=>{e.target.result.createObjectStore(\"notes\",{keyPath:\"id\",autoIncrement:!0}).createIndex(\"body\",\"body\",{unique:!1})})})})()}]);","extractedComments":[]}